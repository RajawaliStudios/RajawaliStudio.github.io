<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Form</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{
  font-family:'Poppins',sans-serif;
  height:100vh; display:flex; justify-content:center; align-items:center;
  background: linear-gradient(270deg,#74eb,#ACB6E5,#8e44ad,#3498db);
  background-size: 800% 800%;
  animation: gradientBG 25s ease infinite;
  overflow:hidden;
}
@keyframes gradientBG{
  0%{background-position:0% 50%;}
  50%{background-position:100% 50%;}
  100%{background-position:0% 50%;}
}
.form-container{
  background: rgba(0,0,0,0.9);
  padding: 40px 30px;
  border-radius: 20px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.7);
  width:100%; max-width:500px;
  color:#fff;
  text-align:center;
}
h2{
  text-align:center;
  margin-bottom:20px;
  font-size:28px;
  text-shadow:0 0 15px #6c63ff,0 0 25px #ff00ff;
}
/* Progress Bar */
.progress-container{
  width:100%;
  height:8px;
  background: rgba(255,255,255,0.2);
  border-radius:4px;
  overflow:hidden;
  margin-bottom:10px;
  position:relative;
}
.progress-bar{
  height:100%;
  width:0%;
  background: linear-gradient(90deg,#6c63ff,#ff00ff,#6c63ff);
  border-radius:4px;
  transition: width 0.5s ease;
  box-shadow:0 0 15px #6c63ff,0 0 25px #ff00ff;
}
.progress-text{margin-bottom:20px;font-size:14px;color:#fff;}
/* Form Steps */
.form-step{display:none;animation: fadeSlide 0.6s forwards;}
.form-step.active{display:block;}
@keyframes fadeSlide{0%{opacity:0;transform:translateY(30px);}100%{opacity:1;transform:translateY(0);}}
/* Input hologram */
input,textarea{
  width:100%;
  padding:14px 18px;
  border-radius:12px;
  border:2px solid #6c63ff;
  outline:none;
  font-size:16px;
  background: rgba(0,0,0,0.3);
  color:#fff;
  box-shadow:0 0 15px #6c63ff inset;
  transition: all 0.3s ease;
  backdrop-filter: blur(5px);
  margin-bottom:20px;
  background-image: linear-gradient(120deg, rgba(255,255,255,0.1), rgba(255,255,255,0.25));
  background-size: 200% 200%;
}
input:focus,textarea:focus{
  animation:  2s infinite linear;
  border-color:#ff00ff;
  box-shadow:0 0 30px #ff00ff,0 0 50px #6c63ff inset;
}
@keyframes shimmer{0%{background-position:-200% 0;}100%{background-position:200% 0;}}
/* Button */
.submit-btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:15px;
  background: linear-gradient(90deg,#6c63ff,#ff00ff,#6c63ff);
  color:#fff;
  font-size:18px;
  cursor:pointer;
  margin-top:10px;
  text-shadow:0 0 5px #fff;
}
.submit-btn:hover{box-shadow:0 0 30px #ff00ff,0 0 60px #6c63ff inset;}
.success-message{font-size:22px;font-weight:bold;padding:30px;display:none;}
/* Confetti */
@keyframes confettiFall{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(500px) rotate(720deg);}}
.confetti{position:absolute;width:10px;height:10px;opacity:0.8;pointer-events:none;}

/* OFFLINE SCREEN */
#offlineScreen{
  position:fixed;
  top:0; left:0; right:0; bottom:0;
  background:#000000;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  color:#ff4d4d;
  font-size:22px;
  font-weight:bold;
  z-index:9999;
  text-align:center;
  padding:20px;
}
#offlineScreen.hidden{display:none;}
.chibi-wifi{
  position:relative;
  width:140px;
  height:200px;
  display:flex;
  flex-direction:column;
  align-items:center;
  animation:shake 2s infinite;
}
@keyframes shake{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-6px);}
}
.antenna{
  width:40px;
  height:40px;
  border:6px solid #ff4d4d;
  border-radius:50%;
  margin-bottom:5px;
  animation:pulse 1.5s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 10px #ff4d4d;}
  50%{box-shadow:0 0 25px #ff1a1a;}
  100%{box-shadow:0 0 10px #ff4d4d;}
}
.head{
  width:100px;
  height:80px;
  background:#1a1a1a;
  border:4px solid #ff4d4d;
  border-radius:25px;
  position:relative;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
.eyes{
  display:flex;
  justify-content:space-between;
  width:60%;
}
.eye{
  width:15px;
  height:15px;
  background:#ff4d4d;
  border-radius:50%;
}
.mouth{
  width:40px;
  height:15px;
  border-bottom:5px solid #ff4d4d;
  border-radius:50%;
  transform:rotate(180deg); /* sad */
  margin-top:5px;
}
.body{
  width:60px;
  height:70px;
  background:#1a1a1a;
  border:4px solid #ff4d4d;
  border-radius:20px;
  margin-top:8px;
}
.arms{
  position:absolute;
  top:110px;
  display:flex;
  justify-content:space-between;
  width:140px;
}
.arm{
  width:20px;
  height:40px;
  background:#1a1a1a;
  border:4px solid #ff4d4d;
  border-radius:15px;
}
.arm.left{transform:rotate(20deg);}
.arm.right{transform:rotate(-20deg);}
#offlineScreen button{
  margin-top:15px;
  background:#ff4d4d;
  border:none;
  padding:10px 20px;
  border-radius:10px;
  color:#fff;
  font-size:16px;
  cursor:pointer;
}
#offlineScreen button:hover{
  background:#ff1a1a;
}
</style>
</head>
<body>
<audio id="clickSound" src="https://freesound.org/data/previews/341/341695_6241290-lq.mp3"></audio>

<!-- Offline Screen -->
<div id="offlineScreen" class="hidden">
  <div class="chibi-wifi">
    <div class="antenna"></div>
    <div class="head">
      <div class="eyes">
        <div class="eye"></div>
        <div class="eye"></div>
      </div>
      <div class="mouth"></div>
    </div>
    <div class="body"></div>
    <div class="arms">
      <div class="arm left"></div>
      <div class="arm right"></div>
    </div>
  </div>
  <p>Anda sedang offline</p>
  <small>Periksa koneksi internet lalu coba lagi.</small>
  <br>
  <br>
  <br>
  <p2>ERROR 404</p2>
</div>

<div class="form-container" id="formContainer">
  <h2>Form</h2>
  <div class="progress-container"><div class="progress-bar" id="progressBar"></div></div>
  <div class="progress-text" id="progressText">0 / 4</div>

  <form id="multiStepForm">
    <div class="form-step active">
      <input type="name" name="name" placeholder="Nama" required>
      <button type="button" class="submit-btn next-btn">Lanjut</button>
    </div>
    <div class="form-step">
      <input type="date" name="date" placeholder="Tanggal" required>
      <button type="button" class="submit-btn next-btn">Lanjut</button>
    </div>
    <div class="form-step">
      <input type="text" name="message" placeholder="Pesan" required>
      <button type="button" class="submit-btn next-btn">Lanjut</button>
      </div>
      <div class="form-step">
      <input type="text" name="Inti" placeholder="Inti Peristiwa" required>
      <button type="button" class="submit-btn next-btn">Lanjut</button>
      </div>
      <div class="form-step">
      <input type="select" name="location" placeholder="lokasi" required>
      <button type="button" class="submit-btn next-btn">Lanjut</button>
      </div>
      <div class="form-step">
      <input type="time" name="Time" placeholder="Time" required>
      <button type="submit" class="submit-btn">Send</button>
    </div>
  </form>

  <div class="success-message" id="successMessage">
    Terima kasih!
    <br>
    Form berhasil dikirim
    <br><br>
    <button id="backHomeBtn" class="submit-btn">Kembali Ke Menu</button>
  </div>
</div>

<script>
const form=document.getElementById('multiStepForm');
const steps=form.querySelectorAll('.form-step');
const progressBar=document.getElementById('progressBar');
const progressText=document.getElementById('progressText');
const successMessage=document.getElementById('successMessage');
const clickSound=document.getElementById('clickSound');
const formContainer=document.getElementById('formContainer');
const offlineScreen=document.getElementById('offlineScreen');

let currentStep=0;
const totalSteps=steps.length;

function showStep(index){
  steps.forEach((step,i)=>{
    step.classList.remove('active');
    if(i===index) step.classList.add('active');
  });
  let percent=((index)/totalSteps)*100;
  progressBar.style.width=percent+'%';
  progressText.textContent=`${index+1} / ${totalSteps}`;
}

// Next
form.querySelectorAll('.next-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    clickSound.currentTime=0; clickSound.play();
    if(currentStep < totalSteps-1){
      currentStep++;
      showStep(currentStep);
    }
  });
});

// Submit
form.addEventListener('submit', e=>{
  e.preventDefault();
  clickSound.currentTime=0; clickSound.play();

  // Kumpulin semua data
  const formData = {};
  form.querySelectorAll("input, textarea").forEach(el=>{
    formData[el.name] = el.value;
  });

  // Simpan ke localStorage
  let submissions = JSON.parse(localStorage.getItem("formSubmissions")) || [];
  submissions.push(formData);
  localStorage.setItem("formSubmissions", JSON.stringify(submissions));

  form.style.display='none';
  progressBar.style.width='100%';
  progressText.textContent=`${totalSteps} / ${totalSteps}`;
  successMessage.style.display='block';

  // confetti
  for(let i=0;i<70;i++){
    const c=document.createElement('div');
    c.classList.add('confetti');
    c.style.left=Math.random()*100+'%';
    c.style.backgroundColor=`hsl(${Math.random()*360},100%,70%)`;
    c.style.animation=`confettiFall ${2+Math.random()*2}s linear forwards`;
    c.style.width=5+Math.random()*10+'px';
    c.style.height=5+Math.random()*10+'px';
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),4000);
  }
});

// Reset form saat kembali
document.getElementById('backHomeBtn').addEventListener('click', ()=>{
  form.querySelectorAll("input, textarea").forEach(el=>{el.value="";});
  successMessage.style.display='none';
  form.style.display='block';
  currentStep=0;
  showStep(currentStep);
  progressBar.style.width='0%';
});

// Cek koneksi internet
function checkConnection(){
  if(navigator.onLine){
    offlineScreen.classList.add("hidden");
    formContainer.style.display="block";
  }else{
    offlineScreen.classList.remove("hidden");
    formContainer.style.display="none";
  }
}
window.addEventListener("online", checkConnection);
window.addEventListener("offline", checkConnection);
checkConnection();

showStep(currentStep);
</script>
</body>
  </html>
